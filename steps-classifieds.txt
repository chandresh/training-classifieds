Classifieds Website: minimal craigslist
---------------------------------

	- Users can signup
	- Users can post advertisements
	- Users can see contact requests on the ads
	
	- Admin can login
	- Admin can approve the advertisements
	- Admin can create categories
	- Visitors can view the listings by category
	- Visitors can search the listings
	- Visitors can view details of the listings
	- Visitors can contact the user who posted the ad by a 		contact form
--------------------------------------------------

User First Signs Up -> Post An Ad -> Admin Approves the ad -> Ad is displayed

* 2 types of users

* session/ db based login

* signup

* login

* search

* file upload

--------------------------------------------------------------

Models:

User:
	email
	password - virtual attribute
	name	
	address:text

Category
	name

Advert
	title
	image
	description
	contact_details
	user_id
	category_id

Lead
	name
	email
	phone
	message
	advert_id


User has many adverts
Category has many adverts
Advert has many leads
User has many leads through adverts

------------------------------------------------------------


1. Plan for the models & model attributes + some workflow.

2. Create a new rails projects

3. New repo on Github

4. Chose a template + modify it if required.

5. Use the template on layout.

6. Create a root (adverts/index)

7. Signup / Login:

- User model: scaffold + add a password_digest field + has_secured_password

rails g migration add_password_digest_to_users password_digest

- Create route for login
- signup form 
- login form
- session controller:
	new, create & destroy
- Create route for logout
- create a helper_method: current_user in the application_controller
- links to signup/login & logout



## Debug

1. Use puts

2. Use pry-rails

add to Gemfile
put "binding.pry" wherever you want to explore the running code.

Ctr-D to get out of pry and move to next binding.pry or normal.

## Gemfile groups

group :development do
  gem 'pry-rails'
  gem 'sqlite3'
end

group :production do
  gem 'pg'
end

#### Homework: ####  11 June 2013

1. Practice the stuff we discussed.

2. Create a new project and use devise gem to create complete user sign up & login.

https://github.com/plataformatec/devise

############

8. Create a my account section for the users. The users can edit/view their account & only their account details.

9. Admin related stuff: admin login.

10. Admin can manage users, can view/edit the details of any users.

11. Admin category management.

12. Members can post an adverts or see their past adverts

13. Admin approves the advert

14. Work on displaying the adverts

15. Contact form for the adverts

#### Scaffold ####

Use scaffold, but

1. Delete extra actions.

2. Disable extra routes. -> 404 error. 

resources :users, only: [:show, :new]

3. Use before_filters to protect member or admin only stuff

4. MOST IMPORTANT: Always access stuff from current_user (or similar) for the logged in users.

@advert = Advert.new XXX Totally wrong
@advert = current_user.adverts.new ## PERFECT!
##### Tomorrow ###########